<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LICUIS ULTRA </title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;500;600;700&family=Orbitron:wght@400;500;700;900&family=Exo+2:wght@300;400;500;600;700&display=swap');

        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --secondary: #6366f1;
            --accent: #818cf8;
            --win: #10b981;
            --loss: #ef4444;
            --warning: #f59e0b;
            --bg-light: #0f0f23;
            --bg-lighter: #1a1b2e;
            --bg-medium: #252641;
            --text-dark: #f8fafc;
            --text-medium: #e2e8f0;
            --text-light: #94a3b8;
            --glass-bg: rgba(26, 27, 46, 0.9);
            --glass-border: rgba(79, 70, 229, 0.3);
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.5);
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            --success-gradient: linear-gradient(135deg, var(--win), #059669);
            --danger-gradient: linear-gradient(135deg, var(--loss), #dc2626);
            --radius: 16px;
            --radius-sm: 8px;
            --glow: 0 0 15px rgba(79, 70, 229, 0.5);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            font-family: 'Exo 2', sans-serif;
            padding: 0;
            margin: 0;
            overflow: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(79, 70, 229, 0.1) 0%, transparent 25%), 
                radial-gradient(circle at 90% 80%, rgba(99, 102, 241, 0.1) 0%, transparent 25%),
                linear-gradient(to bottom, rgba(15, 15, 35, 0.9), rgba(15, 15, 35, 0.7));
            position: fixed;
            width: 100%;
            height: 100%;
            line-height: 1.6;
        }

        /* Enhanced Logo Styles */
        .logo {
            position: absolute;
            top: 15px;
            left: 20px;
            z-index: 100000000;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background: var(--glass-bg);
            border-radius: var(--radius);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow), var(--glow);
            transition: var(--transition);
        }

        .logo:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5), 0 0 20px rgba(79, 70, 229, 0.6);
        }

        .logo-icon {
            width: 38px;
            height: 38px;
            background: var(--gradient);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px rgba(79, 70, 229, 0.5);
            animation: logoPulse 4s ease-in-out infinite;
        }

        @keyframes logoPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); box-shadow: 0 0 25px rgba(79, 70, 229, 0.7); }
        }

        .logo-icon svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        .logo-text {
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 18px;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(79, 70, 229, 0.3);
        }

        /* Enhanced Tab System */
        .tab-system {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            background: rgba(15, 15, 35, 0.95);
            display: flex;
            z-index: 99999999;
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(79, 70, 229, 0.2);
            padding-left: 120px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .tab {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            gap: 10px;
        }

        .tab:hover {
            background: rgba(79, 70, 229, 0.1);
        }

        .tab.active {
            background: rgba(79, 70, 229, 0.15);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient);
            border-radius: 2px 2px 0 0;
            box-shadow: 0 0 10px rgba(79, 70, 229, 0.5);
        }

        .tab-icon {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            background: rgba(79, 70, 229, 0.1);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .tab.active .tab-icon {
            background: var(--gradient);
            box-shadow: 0 0 15px rgba(79, 70, 229, 0.4);
        }

        .tab-icon i {
            font-size: 14px;
            color: var(--primary);
            transition: var(--transition);
            z-index: 1;
        }

        .tab.active .tab-icon i {
            color: white;
        }

        .tab-label {
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-medium);
            transition: var(--transition);
            letter-spacing: 0.5px;
        }

        .tab.active .tab-label {
            color: var(--text-dark);
            font-weight: 700;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .tab:hover .tab-label {
            color: var(--text-dark);
        }

        /* Content Sections */
        .content-section {
            position: fixed;
            top: 70px;
            left: 0;
            width: 100%;
            height: calc(100% - 70px);
            display: none;
            overflow: hidden;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Web Section (Game Selection) */
        #web-section {
            background-color: var(--bg-light);
        }

        /* History Section */
        #history-section {
            background-color: var(--bg-light);
            padding: 25px;
            overflow-y: auto;
        }

        .history-container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--glass-bg);
            border-radius: var(--radius);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(15px);
            overflow: hidden;
            box-shadow: var(--shadow), var(--glow);
            animation: slideUp 0.6s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .history-title {
            text-align: center;
            padding: 25px;
            font-family: 'Orbitron', sans-serif;
            font-size: 26px;
            color: var(--primary);
            background: rgba(79, 70, 229, 0.05);
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            text-shadow: 0 0 10px rgba(79, 70, 229, 0.3);
        }

        .history-controls {
            display: flex;
            justify-content: space-between;
            padding: 25px;
            background: rgba(79, 70, 229, 0.05);
            border-bottom: 1px solid var(--glass-border);
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .history-filter {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: rgba(26, 27, 46, 0.9);
            border: 1px solid var(--glass-border);
            color: var(--text-medium);
            padding: 12px 20px;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Exo 2', sans-serif;
        }

        .filter-btn:hover {
            background: rgba(79, 70, 229, 0.15);
            border-color: var(--primary);
            color: var(--text-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .filter-btn.active {
            background: var(--gradient);
            color: white;
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3), 0 0 10px rgba(79, 70, 229, 0.3);
            border-color: transparent;
        }

        .history-stats {
            display: flex;
            gap: 15px;
        }

        .stat-badge {
            background: rgba(26, 27, 46, 0.9);
            border: 1px solid var(--glass-border);
            padding: 12px 20px;
            border-radius: 30px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            transition: var(--transition);
        }

        .stat-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .stat-badge.win {
            color: var(--win);
            background: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .stat-badge.loss {
            color: var(--loss);
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .history-content {
            padding: 0;
        }

        .history-header {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            padding: 20px 25px;
            background: rgba(79, 70, 229, 0.05);
            font-weight: 600;
            border-bottom: 1px solid var(--glass-border);
            color: var(--text-dark);
            font-family: 'Exo 2', sans-serif;
            font-size: 15px;
        }

        .history-item {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            padding: 20px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
            position: relative;
        }

        .history-item:hover {
            background: rgba(79, 70, 229, 0.03);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .history-value {
            font-size: 16px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-dark);
            font-family: 'Exo 2', sans-serif;
        }

        .history-value-highlight {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
            text-shadow: 0 0 10px rgba(79, 70, 229, 0.3);
        }

        .color-dot {
            display: inline-block;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            margin-right: 10px;
            box-shadow: 0 0 8px currentColor;
        }

        .color-red {
            background-color: var(--loss);
        }

        .color-green {
            background-color: var(--win);
        }

        .history-pagination {
            display: flex;
            justify-content: center;
            padding: 25px;
            gap: 12px;
            border-top: 1px solid var(--glass-border);
        }

        .pagination-btn {
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: rgba(26, 27, 46, 0.9);
            border: 1px solid var(--glass-border);
            color: var(--text-dark);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            font-family: 'Exo 2', sans-serif;
        }

        .pagination-btn:hover:not(.disabled) {
            background: rgba(79, 70, 229, 0.1);
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .pagination-btn.active {
            background: var(--gradient);
            color: white;
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3), 0 0 10px rgba(79, 70, 229, 0.3);
            border-color: transparent;
        }

        .pagination-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .loading-container,
        .error-container,
        .no-data-container {
            text-align: center;
            padding: 80px 25px;
            color: var(--text-light);
        }

        .loading-container i,
        .error-container i,
        .no-data-container i {
            font-size: 36px;
            margin-bottom: 20px;
            display: block;
            color: var(--primary);
        }

        .error-container {
            color: var(--loss);
        }

        /* Analysis Section */
        #analysis-section {
            overflow-y: auto;
            padding: 25px;
        }

        .analysis-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .analysis-card {
            background: var(--glass-bg);
            border-radius: var(--radius);
            border: 1px solid var(--glass-border);
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
            box-shadow: var(--shadow), var(--glow);
            animation: slideUp 0.6s ease;
        }

        .analysis-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 22px;
            color: var(--primary);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--glass-border);
            text-shadow: 0 0 10px rgba(79, 70, 229, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-item {
            background: rgba(26, 27, 46, 0.9);
            border-radius: var(--radius);
            padding: 25px;
            text-align: center;
            border: 1px solid var(--glass-border);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient);
            transform: scaleX(0);
            transition: transform 0.5s ease;
        }

        .stat-item:hover::before {
            transform: scaleX(1);
        }

        .stat-item:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg), 0 0 15px rgba(79, 70, 229, 0.3);
        }

        .stat-value {
            font-size: 32px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(79, 70, 229, 0.3);
            font-family: 'Orbitron', sans-serif;
        }

        .stat-label {
            font-size: 15px;
            color: var(--text-light);
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .pattern-list {
            margin-top: 25px;
        }

        .pattern-item {
            display: flex;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            align-items: center;
            transition: var(--transition);
        }

        .pattern-item:hover {
            background: rgba(79, 70, 229, 0.03);
            padding-left: 10px;
            padding-right: 10px;
            border-radius: var(--radius-sm);
        }

        .pattern-item:last-child {
            border-bottom: none;
        }

        .pattern-value {
            font-weight: 600;
            color: var(--text-dark);
            font-family: 'Exo 2', sans-serif;
        }

        .pattern-confidence {
            color: var(--primary);
            font-weight: 700;
            text-shadow: 0 0 10px rgba(79, 70, 229, 0.3);
        }

        /* Strategy Cards */
        .strategy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .strategy-card {
            background: rgba(26, 27, 46, 0.9);
            border-radius: var(--radius);
            padding: 25px;
            border-left: 4px solid var(--primary);
            border: 1px solid var(--glass-border);
            transition: var(--transition);
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .strategy-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient);
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 0;
        }

        .strategy-card:hover::before {
            opacity: 0.05;
        }

        .strategy-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg), 0 0 15px rgba(79, 70, 229, 0.3);
        }

        .strategy-title {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 19px;
            position: relative;
            z-index: 1;
            font-family: 'Exo 2', sans-serif;
        }

        .strategy-description {
            font-family: 'Exo 2', sans-serif;
            font-size: 15px;
            color: var(--text-medium);
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        /* Game Selection Screen */
        .game-selection {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 15, 35, 0.98);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999999;
            animation: fadeIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
            backdrop-filter: blur(15px);
        }

        .game-selection::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(79, 70, 229, 0.1) 0%, transparent 25%), 
                radial-gradient(circle at 80% 70%, rgba(99, 102, 241, 0.1) 0%, transparent 25%);
            z-index: -1;
            pointer-events: none;
        }

        .game-selection-title {
            font-family: 'El Messiri', sans-serif;
            font-weight: 700;
            font-size: 48px;
            margin: 0 0 60px;
            color: var(--primary);
            letter-spacing: 4px;
            position: relative;
            display: inline-block;
            text-shadow: 0 5px 20px rgba(79, 70, 229, 0.4);
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { text-shadow: 0 5px 20px rgba(79, 70, 229, 0.4); }
            to { text-shadow: 0 5px 30px rgba(79, 70, 229, 0.7), 0 0 20px rgba(79, 70, 229, 0.5); }
        }

        .game-selection-title::after {
            content: "";
            position: absolute;
            bottom: -20px;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 1s cubic-bezier(0.19, 1, 0.22, 1);
            border-radius: 2px;
            box-shadow: 0 0 15px rgba(79, 70, 229, 0.5);
        }

        .game-selection-title.animate::after {
            transform: scaleX(1);
            transform-origin: left;
        }

        .game-list-container {
            width: 100%;
            max-width: 1200px;
            max-height: calc(100vh - 220px);
            overflow-y: auto;
            padding: 0 25px;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) rgba(0, 0, 0, 0.1);
        }

        .game-list-container::-webkit-scrollbar {
            width: 10px;
        }

        .game-list-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }

        .game-list-container::-webkit-scrollbar-thumb {
            background: var(--gradient);
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(79, 70, 229, 0.5);
        }

        .game-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            padding: 0 25px 60px;
        }

        .game-item {
            background: rgba(26, 27, 46, 0.95);
            border: 1px solid rgba(79, 70, 229, 0.2);
            border-radius: var(--radius);
            padding: 30px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            font-family: 'Exo 2', sans-serif;
            color: var(--text-dark);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .game-item::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient);
            opacity: 0;
            transition: opacity 0.4s ease;
            border-radius: 3px 3px 0 0;
        }

        .game-item:hover::before {
            opacity: 1;
        }

        .game-item:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-lg), 0 0 20px rgba(79, 70, 229, 0.4);
            background: rgba(26, 27, 46, 1);
            border-color: rgba(79, 70, 229, 0.4);
        }

        .game-name {
            font-family: 'El Messiri', sans-serif;
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
            transition: var(--transition);
        }

        .game-item:hover .game-name {
            color: var(--primary);
            text-shadow: 0 0 10px rgba(79, 70, 229, 0.3);
        }

        .game-url {
            font-size: 14px;
            color: var(--text-light);
            word-break: break-all;
            opacity: 0.7;
            transition: var(--transition);
        }

        .game-item:hover .game-url {
            opacity: 1;
        }

        /* Iframe and Tape Button */
        .fullscreen-iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: 1;
        }

        .hidden {
            display: none;
        }

        /* Enhanced BACK BUTTON DESIGN */
        .injector-tape {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 9999999;
            box-shadow: 0 10px 30px rgba(79, 70, 229, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.7);
            transition: var(--transition);
            animation: tapeFloat 4s ease-in-out infinite;
        }

        @keyframes tapeFloat {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-10px) rotate(10deg);
            }
        }

        .injector-tape:hover {
            transform: scale(1.2) rotate(15deg);
            box-shadow: 0 15px 40px rgba(79, 70, 229, 0.6), 0 0 20px rgba(79, 70, 229, 0.5);
            animation: none;
        }

        .injector-tape::before {
            content: "";
            position: absolute;
            width: 24px;
            height: 24px;
            border-left: 3px solid white;
            border-bottom: 3px solid white;
            transform: rotate(45deg);
            margin-top: -3px;
            margin-left: -3px;
        }

        /* Enhanced Floating Particles */
        .particle {
            position: absolute;
            background: rgba(79, 70, 229, 0.3);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
            filter: blur(2px);
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% {
                transform: translateY(0) translateX(0) rotate(0deg);
            }
            25% {
                transform: translateY(-30px) translateX(20px) rotate(10deg);
            }
            50% {
                transform: translateY(0) translateX(30px) rotate(0deg);
            }
            75% {
                transform: translateY(30px) translateX(20px) rotate(-10deg);
            }
            100% {
                transform: translateY(0) translateX(0) rotate(0deg);
            }
        }

        /* Enhanced Chat Predictor Styles */
        .chat-container {
            width: 100%;
            height: 100%;
            margin: 0 auto;
            padding: 0;
            display: flex;
            flex-direction: column;
            background-color: var(--bg-light);
            position: relative;
            overflow: hidden;
        }

        .chat-header {
            background: var(--bg-lighter);
            padding: 25px 20px;
            text-align: center;
            border-bottom: 1px solid rgba(79, 70, 229, 0.15);
            position: relative;
            z-index: 10;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .chat-title {
            font-weight: 900;
            font-size: 1.8rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 0;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            font-family: 'El Messiri', sans-serif;
            text-shadow: 0 0 15px rgba(79, 70, 229, 0.3);
        }

        .chat-subtitle {
            font-size: 0.9rem;
            color: var(--text-light);
            margin: 10px 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-family: 'Exo 2', sans-serif;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
            background-color: var(--bg-light);
            scroll-behavior: smooth;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(79, 70, 229, 0.08) 0%, transparent 50%), 
                radial-gradient(circle at 75% 75%, rgba(99, 102, 241, 0.08) 0%, transparent 50%);
        }

        .message {
            margin-bottom: 25px;
            padding: 18px 22px;
            border-radius: 20px;
            max-width: 85%;
            word-wrap: break-word;
            position: relative;
            animation: fadeIn 0.4s ease;
            font-family: 'Exo 2', sans-serif;
            font-size: 1rem;
            line-height: 1.5;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .received {
            background-color: var(--bg-lighter);
            border-bottom-left-radius: 10px;
            margin-right: auto;
            border: 1px solid rgba(79, 70, 229, 0.2);
            color: var(--text-dark);
        }

        .sent {
            background: var(--gradient);
            color: white;
            border-bottom-right-radius: 10px;
            margin-left: auto;
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
        }

        .timestamp {
            font-size: 0.75rem;
            color: var(--text-light);
            margin-top: 12px;
            text-align: right;
            opacity: 0.8;
            pointer-events: none;
        }

        .emoji {
            font-size: 1.4em;
            margin-right: 8px;
            display: inline-block;
        }

        .prediction-card {
            background-color: rgba(79, 70, 229, 0.15);
            border-radius: var(--radius);
            padding: 20px;
            margin: 18px 0;
            border: 1px solid rgba(79, 70, 229, 0.3);
            box-shadow: 0 0 15px rgba(79, 70, 229, 0.2);
        }

        .prediction-title {
            font-family: 'Exo 2', sans-serif;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 12px;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .prediction-title i {
            font-size: 1.3rem;
            display: inline-block;
        }

        .prediction-value {
            font-family: 'El Messiri', sans-serif;
            font-size: 2.8rem;
            font-weight: 900;
            margin: 18px 0;
            text-align: center;
            letter-spacing: 1px;
            color: var(--primary);
            text-transform: uppercase;
            text-shadow: 0 0 15px rgba(79, 70, 229, 0.4);
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
            box-shadow: 0 0 8px currentColor;
        }

        .online {
            background-color: var(--win);
        }

        .offline {
            background-color: var(--loss);
        }

        .typing-indicator {
            display: flex;
            padding: 16px 20px;
            background-color: var(--bg-lighter);
            border-radius: 25px;
            width: fit-content;
            margin-bottom: 25px;
            border-bottom-left-radius: 10px;
            align-items: center;
            gap: 12px;
            border: 1px solid rgba(79, 70, 229, 0.2);
        }

        .typing-text {
            font-size: 0.95rem;
            color: var(--text-light);
            font-family: 'Exo 2', sans-serif;
        }

        .typing-dot {
            width: 12px;
            height: 12px;
            background-color: var(--text-light);
            border-radius: 50%;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingAnimation {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.6;
            }
            30% {
                transform: translateY(-8px);
                opacity: 1;
            }
        }

        .scroll-down-btn {
            position: fixed;
            bottom: 110px;
            right: 30px;
            background: var(--gradient);
            color: white;
            width: 52px;
            height: 52px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
            z-index: 100;
            opacity: 0;
            transition: all 0.3s ease;
            border: none;
            outline: none;
        }

        .scroll-down-btn.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .scroll-down-btn:not(.visible) {
            transform: translateY(15px);
        }

        .scroll-down-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 10px 30px rgba(79, 70, 229, 0.4);
        }

        .progress-bar {
            height: 10px;
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 5px;
            background: var(--gradient);
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(79, 70, 229, 0.5);
        }

        .floating-bg {
            position: absolute;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(79, 70, 229, 0.1) 0%, transparent 70%);
            z-index: 0;
            pointer-events: none;
            animation: pulse 8s infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); opacity: 0.7; }
            to { transform: scale(1.1); opacity: 0.9; }
        }

        .bg-1 {
            top: -150px;
            left: -150px;
        }

        .bg-2 {
            bottom: -100px;
            right: -150px;
        }

        .period-display {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            text-align: center;
            margin: 15px 0;
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(79, 70, 229, 0.3);
        }

        .confidence-display {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.85rem;
            color: var(--text-light);
            align-items: center;
        }

        .confidence-value {
            color: var(--primary);
            font-weight: 700;
            text-shadow: 0 0 10px rgba(79, 70, 229, 0.3);
        }

        /* Responsive Adjustments */
        @media (max-width: 1024px) {
            .game-list {
                grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
            }

            .strategy-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .logo {
                left: 15px;
                top: 12px;
            }

            .logo-text {
                display: none;
            }

            .tab-system {
                padding-left: 80px;
                height: 65px;
            }

            .content-section {
                top: 65px;
                height: calc(100% - 65px);
            }

            .game-list {
                grid-template-columns: 1fr 1fr;
                gap: 25px;
            }

            .game-selection-title {
                font-size: 36px;
                margin-bottom: 50px;
            }

            .injector-tape {
                width: 60px;
                height: 60px;
                bottom: 25px;
                right: 25px;
            }

            .tab-label {
                font-size: 12px;
            }

            .tab-icon {
                width: 24px;
                height: 24px;
            }

            .tab-icon i {
                font-size: 12px;
            }

            .prediction-value {
                font-size: 2.2rem;
            }

            .history-header,
            .history-item {
                grid-template-columns: 1fr 1fr 1fr;
                padding: 18px;
            }

            .history-value {
                font-size: 15px;
            }

            .history-value-highlight {
                font-size: 18px;
            }

            .strategy-grid {
                grid-template-columns: 1fr;
            }

            .history-controls {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 480px) {
            .game-list {
                grid-template-columns: 1fr;
            }

            .game-selection-title {
                font-size: 30px;
                margin-bottom: 40px;
            }

            .injector-tape {
                width: 55px;
                height: 55px;
            }

            .tab-label {
                display: none;
            }

            .tab-icon {
                margin-right: 0;
                width: 28px;
                height: 28px;
            }

            .prediction-value {
                font-size: 2rem;
            }

            .history-header,
            .history-item {
                grid-template-columns: 1fr 1fr;
                padding: 15px 12px;
            }

            .history-header-item:nth-child(3),
            .history-item>div:nth-child(3) {
                display: none;
            }

            .history-value {
                font-size: 14px;
            }

            .history-value-highlight {
                font-size: 16px;
            }

            .history-stats {
                flex-wrap: wrap;
                justify-content: center;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .analysis-card {
                padding: 25px;
            }

            .strategy-card {
                padding: 20px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <div class="logo">
        <div class="logo-icon">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 16.5c0 .83-.67 1.5-1.5 1.5H4.5c-.83 0-1.5-.67-1.5-1.5v-9c0-.83.67-1.5 1.5-1.5h15c.83 0 1.5.67 1.5 1.5v9zM4.5 20h15c.83 0 1.5-.67 1.5-1.5v-9c0-.83-.67-1.5-1.5-1.5h-15c-.83 0-1.5.67-1.5 1.5v9c0 .83.67 1.5 1.5 1.5zm2.5-6h2v2H7v-2zm4 0h2v2h-2v-2zm-4 4h2v2H7v-2zm4 0h2v2h-2v-2zm4-4h2v2h-2v-2zm-8-4h2v2H7v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2z" />
            </svg>
        </div>
        <div class="logo-text">LICUIS ULTRA</div>
    </div>

    <div class="tab-system">
        <div class="tab active" data-tab="web" role="tab" aria-controls="web-section" aria-selected="true">
            <div class="tab-icon"><i class="fas fa-gamepad"></i></div>
            <div class="tab-label">Games</div>
        </div>
        <div class="tab" data-tab="predictor" role="tab" aria-controls="predictor-section" aria-selected="false">
            <div class="tab-icon"><i class="fas fa-brain"></i></div>
            <div class="tab-label">Predictor</div>
        </div>
        <div class="tab" data-tab="history" role="tab" aria-controls="history-section" aria-selected="false">
            <div class="tab-icon"><i class="fas fa-history"></i></div>
            <div class="tab-label">History</div>
        </div>
    </div>

    <div class="content-section active" id="web-section" role="tabpanel" aria-labelledby="web-tab">
        <div class="game-selection" id="gameSelection">
            <h1 class="game-selection-title" id="gameSelectionTitle">SELECT GAME</h1>
            <div class="game-list-container">
                <div class="game-list">
                    <div class="game-item" data-url="https://bdginf.com/#/login" role="button" tabindex="0">
                        <div class="game-name">BIG DADDY</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="http://Okwin.bio" role="button" tabindex="0">
                        <div class="game-name">OK WIN</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="https://goagamea.com/#/login" role="button" tabindex="0">
                        <div class="game-name">GOA GAME</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="https://www.bigmumbaiq.com/#/login" role="button" tabindex="0">
                        <div class="game-name">BIG MUMBAI</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="http://tirangagame.top" role="button" tabindex="0">
                        <div class="game-name">TIRANGA</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="https://51game5.com/#/" role="button" tabindex="0">
                        <div class="game-name">51 GAME</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="https://bdgwin.cc/#/login" role="button" tabindex="0">
                        <div class="game-name">BDG WIN</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="http://rajawager.com" role="button" tabindex="0">
                        <div class="game-name">RAJA WAGER</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="http://55club.game" role="button" tabindex="0">
                        <div class="game-name">55 CLUB</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="https://bharatclub.net/#/login" role="button" tabindex="0">
                        <div class="game-name">BHARAT CLUB</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="https://www.diuwin8.com/#/" role="button" tabindex="0">
                        <div class="game-name">DIUWIN</div>
                        <div class="game-url"></div>
                    </div>
                    <div class="game-item" data-url="https://www.aatclub.com/#/" role="button" tabindex="0">
                        <div class="game-name">91 CLUB</div>
                        <div class="game-url"></div>
                    </div>
                </div>
            </div>
        </div>

        <iframe id="gameFrame" class="fullscreen-iframe hidden" allowfullscreen aria-label="Game Window"></iframe>

        <button class="injector-tape hidden" id="injectorTape" aria-label="Go Back to Game Selection"></button>
    </div>

    <div class="content-section" id="predictor-section" role="tabpanel" aria-labelledby="predictor-tab">
        <div class="chat-container">
            <div class="floating-bg bg-1"></div>
            <div class="floating-bg bg-2"></div>

            <div class="chat-header">
                <h1 class="chat-title">LICUIS ULTRA</h1>
                <p class="chat-subtitle">
                    <span class="status-indicator online"></span>
                    <span id="connection-status">Connected to Server</span>
                    • <span id="current-time">00:00:00</span>
                    • <span id="prediction-speed">0ms</span>
                </p>
            </div>

            <div class="messages-container" id="messages-container">
                <div class="message received">
                    <div class="prediction-title"><i class="fas fa-robot"></i> SYSTEM INITIALIZED</div>
                    <p>Welcome to <strong>LICUIS ULTRA</strong>, Advanced AI models are analyzing game patterns in real-time to provide you with the most accurate predictions.</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%"></div>
                    </div>
                    <div class="timestamp" id="last-update-time">Just now</div>
                </div>

                <div class="typing-indicator" id="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <span class="typing-text">Initializing AI models...</span>
                </div>
            </div>

            <button class="scroll-down-btn" id="scroll-down-btn" aria-label="Scroll to bottom">
                <i class="fas fa-chevron-down"></i>
            </button>
        </div>
    </div>

    <div class="content-section" id="history-section" role="tabpanel" aria-labelledby="history-tab">
        <div class="history-container">
            <div class="history-title">
                <i class="fas fa-history"></i> GAME HISTORY
            </div>
            <div class="history-controls">
                <div class="history-filter">
                    <button class="filter-btn active" data-filter="all"><i class="fas fa-layer-group"></i> All</button>
                    <button class="filter-btn" data-filter="big"><i class="fas fa-arrow-up"></i> Big</button>
                    <button class="filter-btn" data-filter="small"><i class="fas fa-arrow-down"></i> Small</button>
                    <button class="filter-btn" data-filter="red"><i class="fas fa-circle" style="color: #ef4444;"></i> Red</button>
                    <button class="filter-btn" data-filter="green"><i class="fas fa-circle" style="color: #10b981;"></i> Green</button>
                </div>
                <div class="history-stats">
                    <div class="stat-badge"><i class="fas fa-database"></i> <span id="total-count">0</span></div>
                </div>
            </div>
            <div class="history-content" id="historyContent">
                <div class="loading-container">
                    <i class="fas fa-spinner fa-spin"></i>
                    <div>LOADING DATA...</div>
                </div>
            </div>
            <div class="history-pagination" id="historyPagination">
                <button class="pagination-btn disabled" id="prevPage" aria-label="Previous Page"><i class="fas fa-chevron-left"></i></button>
                <button class="pagination-btn active">1</button>
                <button class="pagination-btn">2</button>
                <button class="pagination-btn">3</button>
                <button class="pagination-btn" id="nextPage" aria-label="Next Page"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </div>

<script>
"use strict";

// --- Helper Functions for Outcome Mapping ---
const getBigSmallOutcome = (num) => (num >= 5) ? 'BIG' : 'SMALL';
const getRedGreenOutcome = (num) => (num % 2 === 0) ? 'RED' : 'GREEN';
const fallbackPrediction = () => {
    const outcomes = ['BIG', 'SMALL', 'RED', 'GREEN'];
    return outcomes[Math.floor(Math.random() * outcomes.length)];
};

// --- Dummy/Placeholder Classes for Strategies (Required for engine initialization) ---
class PatternRecognition {
    loadState(key) {
        try {
            const saved = localStorage.getItem(key);
            if (!saved) return null;
            const data = JSON.parse(saved);
            return (key.includes('Patterns')) ? new Map(data) : data;
        } catch (e) {
            return null;
        }
    }
    saveState(key, data) {
        try {
            const dataToSave = (data instanceof Map) ? Array.from(data.entries()) : data;
            localStorage.setItem(key, JSON.stringify(dataToSave));
        } catch (e) {
            console.error('Error saving state:', e);
        }
    }
    predict() { return fallbackPrediction(); }
    update() {}
}
class MarkovChainPredictor {
    initializeMatrix() { return []; }
    predict() { return fallbackPrediction(); }
    update() {}
}
class BayesianPredictor {
    predict() { return fallbackPrediction(); }
    update() {}
}
class ReinforcementLearner {
    getState() {}
    predict() { return fallbackPrediction(); }
    update() {}
}
class GeneticAlgorithmPredictor {
    loadState() {}
    saveState() {}
    initializePopulation() { return []; }
    predict() { return fallbackPrediction(); }
    update() {}
    evolve() {}
    selectParent() {}
}
class NeuralNetworkPredictor {
    loadState() {}
    saveState() {}
    initializeModel() { 
        this.model = {
            predict: () => [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1],
            train: () => {}
        }; 
    }
    predict() { return fallbackPrediction(); }
    update() {}
}
class MonteCarloPredictor {
    predict() { return fallbackPrediction(); }
    update() {}
}
class ClusteringPredictor {
    predict() { return fallbackPrediction(); }
    update() {}
}
class TrendAnalyzer {
    predict() { return fallbackPrediction(); }
    update() {}
}
class StreakDetector {
    predict() { return fallbackPrediction(); }
    checkStreak() { return { streakLength: 0, lastOutcome: null }; }
    update() {}
}
class TimeAwarePredictor {
    predict() { return fallbackPrediction(); }
    update() {}
}
class FrequencyAnalyzer {
    predict() { return fallbackPrediction(); }
    update() {}
}
class HybridPredictor {
    predict() { return fallbackPrediction(); }
    update() {}
}

// --- Core Engine Class ---
class AIPredictionEngine {
    constructor() {
        this.history = this.loadHistory();
        this.strategyWeights = this.loadStrategyWeights();
        this.currentStreak = 0;
        this.oppositeMode = false;
        this.initStrategies();
    }

    initStrategies() {
        this.strategies = {
            patternRecognition: new PatternRecognition(),
            markovChain: new MarkovChainPredictor(),
            bayesianInference: new BayesianPredictor(),
            reinforcementLearning: new ReinforcementLearner(),
            geneticAlgorithm: new GeneticAlgorithmPredictor(),
            neuralNetwork: new NeuralNetworkPredictor(),
            monteCarlo: new MonteCarloPredictor(),
            clustering: new ClusteringPredictor(),
            trendAnalysis: new TrendAnalyzer(),
            streakDetection: new StreakDetector(),
            timeAware: new TimeAwarePredictor(),
            frequencyAnalysis: new FrequencyAnalyzer(),
            hybridModel: new HybridPredictor()
        };
    }

    predictNext() {
        const predictions = {};
        for (const [name, strategy] of Object.entries(this.strategies)) {
            predictions[name] = strategy.predict(this.history);
        }

        let finalPrediction = this.applyEnsembleWeighting(predictions);
        finalPrediction = this.applySafetyLogic(finalPrediction);
        
        return { final: finalPrediction.final, confidence: finalPrediction.confidence, all: predictions };
    }

    addResult(result, predictions, finalPredictionObj) {
        if (typeof result !== 'number' || result < 0 || result > 9) {
            console.error('Invalid result added to engine:', result);
            return;
        }

        this.history.push({
            value: result,
            timestamp: Date.now()
        });
        
        if (this.history.length > 1000) {
            this.history = this.history.slice(-1000);
        }
        
        this.saveHistory();
        this.updateStrategyWeights(result, predictions);
        this.updateStreak(result, finalPredictionObj);
        
        for (const strategy of Object.values(this.strategies)) {
            if (typeof strategy.update === 'function') {
                if (strategy.constructor.name === 'ReinforcementLearner' || strategy.constructor.name === 'GeneticAlgorithmPredictor') {
                    strategy.update(result, finalPredictionObj);
                } else {
                    strategy.update(result);
                }
            }
        }
    }

    applyEnsembleWeighting(predictions) {
        const scores = { BIG: 0, SMALL: 0, RED: 0, GREEN: 0 };
        
        for (const [strategyName, prediction] of Object.entries(predictions)) {
            const weight = this.strategyWeights[strategyName] || 1;
            if (typeof prediction === 'string' && scores.hasOwnProperty(prediction)) { 
                scores[prediction] += weight;
            }
        }
        
        let bestPrediction = null;
        let maxScore = -Infinity;
        for (const [prediction, score] of Object.entries(scores)) {
            if (score > maxScore) {
                maxScore = score;
                bestPrediction = prediction;
            }
        }
        
        const totalWeight = Object.values(this.strategyWeights).reduce((a, b) => a + b, 0) || 1;
        const confidence = (maxScore / totalWeight) * 100;

        return { prediction: bestPrediction || fallbackPrediction(), confidence: confidence.toFixed(2) };
    }

    applySafetyLogic({prediction, confidence}) {
        let finalPrediction = prediction;
        
        if (this.currentStreak <= -3) {
            this.oppositeMode = true;
        }
        
        let finalConfidence = parseFloat(confidence);
        
        if (this.oppositeMode) {
            switch (finalPrediction) {
                case 'BIG': finalPrediction = 'SMALL'; break;
                case 'SMALL': finalPrediction = 'BIG'; break;
                case 'RED': finalPrediction = 'GREEN'; break;
                case 'GREEN': finalPrediction = 'RED'; break;
            }
            finalConfidence = finalConfidence * 0.95;
        }
        
        return { final: finalPrediction, confidence: finalConfidence.toFixed(2) };
    }

    updateStrategyWeights(actualResult, allPredictions) {
        const actualBigSmall = getBigSmallOutcome(actualResult);
        const actualRedGreen = getRedGreenOutcome(actualResult);
        
        for (const [strategyName, predictionData] of Object.entries(allPredictions)) {
            const prediction = predictionData;
            const weight = this.strategyWeights[strategyName] || 1;
            let isCorrect = false;

            if (prediction === actualBigSmall || prediction === actualRedGreen) {
                isCorrect = true;
            }

            if (isCorrect) {
                this.strategyWeights[strategyName] = Math.min(weight * 1.1, 10);
            } else {
                this.strategyWeights[strategyName] = Math.max(weight * 0.9, 0.1);
            }
        }
        
        this.saveStrategyWeights();
    }
    
    updateStreak(actualResult, finalPredictionObj) {
        const actualBigSmall = getBigSmallOutcome(actualResult);
        const actualRedGreen = getRedGreenOutcome(actualResult);
        const resultOutcome = finalPredictionObj.final;

        if (resultOutcome === actualBigSmall || resultOutcome === actualRedGreen) {
            this.currentStreak = Math.max(1, this.currentStreak + 1);
            this.oppositeMode = false;
        } else {
            this.currentStreak = Math.min(-1, this.currentStreak - 1);
        }
    }
    
    loadHistory() {
        try {
            const saved = localStorage.getItem('predictionHistory');
            return saved ? JSON.parse(saved) : [];
        } catch (e) {
            console.error('Error loading history:', e);
            return [];
        }
    }
    
    saveHistory() {
        try {
            localStorage.setItem('predictionHistory', JSON.stringify(this.history));
        } catch (e) {
            console.error('Error saving history:', e);
        }
    }
    
    loadStrategyWeights() {
        try {
            const saved = localStorage.getItem('strategyWeights');
            if (!saved) {
                const defaultWeights = {};
                const strategyNames = ['patternRecognition', 'markovChain', 'bayesianInference', 'reinforcementLearning', 'geneticAlgorithm', 'neuralNetwork', 'monteCarlo', 'clustering', 'trendAnalysis', 'streakDetection', 'timeAware', 'frequencyAnalysis', 'hybridModel'];
                strategyNames.forEach(name => defaultWeights[name] = 1.0);
                return defaultWeights;
            }
            return JSON.parse(saved);
        } catch (e) {
            console.error('Error loading strategy weights:', e);
            return {};
        }
    }
    
    saveStrategyWeights() {
        try {
            localStorage.setItem('strategyWeights', JSON.stringify(this.strategyWeights));
        } catch (e) {
            console.error('Error saving strategy weights:', e);
        }
    }
}

// --- AI ENGINE INITIALIZATION ---
let predictionEngine = null;

// --- Tab System and UI Logic ---
document.addEventListener('DOMContentLoaded', function() {
    
    // Initialize AI Engine
    predictionEngine = new AIPredictionEngine();
    
    // Fixed Tab Switching Logic
    const tabs = document.querySelectorAll('.tab');
    const contentSections = document.querySelectorAll('.content-section');
    
    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const tabId = this.getAttribute('data-tab');
            
            // Remove active class from all tabs
            tabs.forEach(t => {
                t.classList.remove('active');
                t.setAttribute('aria-selected', 'false');
            });
            
            // Add active class to clicked tab
            this.classList.add('active');
            this.setAttribute('aria-selected', 'true');
            
            // Hide all content sections
            contentSections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Show the corresponding content section
            const targetSection = document.getElementById(`${tabId}-section`);
            if (targetSection) {
                targetSection.classList.add('active');
                
                // Load data for history tab when activated
                if (tabId === 'history') {
                    fetchData();
                }
            }
        });
    });

    const gameSelection = document.getElementById('gameSelection');
    const gameFrame = document.getElementById('gameFrame');
    const gameItems = document.querySelectorAll('.game-item');
    const injectorTape = document.getElementById('injectorTape');
    
    gameItems.forEach(item => {
        item.addEventListener('click', function() {
            const gameUrl = this.getAttribute('data-url');
            if (gameFrame && gameSelection && injectorTape) {
                gameFrame.src = gameUrl;
                gameSelection.style.display = 'none';
                gameFrame.classList.remove('hidden');
                injectorTape.classList.remove('hidden');
                this.classList.add('active');
                setTimeout(() => this.classList.remove('active'), 500);
            }
        });
    });

    if (injectorTape) {
        injectorTape.addEventListener('click', function() {
            if (gameFrame && gameSelection) {
                gameFrame.classList.add('hidden');
                gameSelection.style.display = "flex";
                injectorTape.classList.add('hidden');
                gameFrame.src = '';
            }
        });
    }

    function createParticles() {
        const colors = ['rgba(37, 99, 235, 0.25)', 'rgba(59, 130, 246, 0.25)', ' rgba(96, 165, 250, 0.25)'];
        for (let i = 0; i < 20; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            const size = Math.random() * 10 + 3;
            const posX = Math.random() * window.innerWidth;
            const posY = Math.random() * window.innerHeight;
            const color = colors[Math.floor(Math.random() * colors.length)];
            const duration = Math.random() * 20 + 10;
            const delay = Math.random() * 5;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            particle.style.left = `${posX}px`;
            particle.style.top = `${posY}px`;
            particle.style.background = color;
            particle.style.opacity = Math.random() * 0.5 + 0.1;
            particle.style.animationDuration = `${duration}s`;
            particle.style.animationDelay = `${delay}s`;
            document.body.appendChild(particle);
        }
    }

    const filterButtons = document.querySelectorAll('.filter-btn');
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            const filter = this.getAttribute('data-filter');
            filterButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            const historyItems = document.querySelectorAll('.history-item');
            historyItems.forEach(item => {
                if (filter === 'all') {
                    item.style.display = 'grid';
                } else {
                    const valueElement = item.querySelector('.history-value-highlight');
                    if (!valueElement) return;
                    const sum = parseInt(valueElement.textContent);
                    const isBig = sum >= 5;
                    const colorDot = item.querySelector('.color-dot');
                    if (!colorDot) return;
                    const isRed = colorDot.classList.contains('color-red');
                    if ((filter === 'big' && isBig) || (filter === 'small' && !isBig) || (filter === 'red' && isRed) || (filter === 'green' && !isRed)) {
                        item.style.display = 'grid';
                    } else {
                        item.style.display = 'none';
                    }
                }
            });
        });
    });

    // Fetch data for history tab
    async function fetchData() {
        try {
            const historyContent = document.getElementById('historyContent');
            if (!historyContent) return;

            historyContent.innerHTML = '<div class="loading-container"><i class="fas fa-spinner fa-spin"></i> LOADING DATA...</div>';

            const timestamp = Date.now();
            const response = await fetch(`https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?ts=${timestamp}&pageSize=10`);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            if (data && data.data && data.data.list && data.data.list.length > 0) {
                displayHistory(data.data.list);
            } else {
                historyContent.innerHTML = '<div class="no-data-container"><i class="fas fa-info-circle"></i> NO DATA AVAILABLE</div>';
            }
        } catch (error) {
            console.error('Error fetching data:', error);
            const historyContent = document.getElementById('historyContent');
            if (historyContent) {
                historyContent.innerHTML = '<div class="error-container"><i class="fas fa-exclamation-triangle"></i> ERROR LOADING DATA</div>';
            }
        }
    }

    // Display history data
    function displayHistory(data) {
        const historyContent = document.getElementById('historyContent');
        if (!historyContent) return;

        if (!data || data.length === 0) {
            historyContent.innerHTML = '<div class="no-data-container"><i class="fas fa-info-circle"></i> NO DATA AVAILABLE</div>';
            return;
        }
           let html = '<div class="history-header">';
        html += '<div class="history-header-item"></div>';
        html += '<div class="history-header-item"></div>';
        html += '<div class="history-header-item"></div>';
        html += '<div class="history-header-item"></div>';
        html += '</div>';

        let totalCount = 0;

        data.forEach(item => {
            const sum = parseInt(item.premium || item.result || item.number || 0);
            const bigSmall = getBigSmallOutcome(sum);
            const isEven = sum % 2 === 0;
            const redGreen = isEven ? 'RED' : 'GREEN';
            const colorClass = isEven ? 'color-red' : 'color-green';

            totalCount++;

            html += `
                <div class="history-item">
                    <div>
                        <div class="history-value">${item.issueNumber || item.period || 'N/A'}</div>
                    </div>
                    <div>
                        <div class="history-value-highlight">${sum}</div>
                    </div>
                    <div>
                        <div class="history-value">${bigSmall}</div>
                    </div>
                    <div>
                        <div class="history-value">
                            <span class="color-dot ${colorClass}"></span>${redGreen}
                        </div>
                    </div>
                </div>
            `;
        });

        // Update total count
        const totalCountElement = document.getElementById('total-count');
        if (totalCountElement) {
             totalCountElement.textContent = totalCount;
        }


        historyContent.innerHTML = html;
    }

    // Chat Predictor Logic
    let latestPeriod = null;
    let currentPredictionData = null; // Store { final: 'BIG', confidence: '85.00', all: {...}, period: '...' }
    let serverOnline = true;
    let lastPredictionPeriod = null;
    let lastActualNumber = null;
    let lastActualPeriod = null;

    // DOM elements
    const messagesContainer = document.getElementById('messages-container');
    const typingIndicator = document.getElementById('typing-indicator');
    const connectionStatus = document.getElementById('connection-status');
    const currentTimeElement = document.getElementById('current-time');
    const lastUpdateTimeElement = document.getElementById('last-update-time'); 
    const scrollDownBtn = document.getElementById('scroll-down-btn');

    // Initialize
    updateClock();
    setInterval(updateClock, 1000);
    setTimeout(() => {
        if (typingIndicator) typingIndicator.style.display = 'none';
        addMessage('received',
            `<div class="prediction-card">
                <div class="prediction-title"><i class="fas fa-robot"></i> SYSTEM INITIALIZED</div>
                <p>Welcome to <strong>LICUIS ULTRA</strong> Advanced AI models are analyzing game patterns in real-time to provide you with the most accurate predictions.</p>
            </div>`,
            'LICUIS ULTRA');
        simulateInitialAnalysis();
    }, 1500);

    // Scroll button functionality
    if (scrollDownBtn && messagesContainer) {
        scrollDownBtn.addEventListener('click', () => {
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        });

        messagesContainer.addEventListener('scroll', () => {
            const {
                scrollTop,
                scrollHeight,
                clientHeight
            } = messagesContainer;
            const distanceFromBottom = scrollHeight - scrollTop - clientHeight;
            scrollDownBtn.classList.toggle('visible', distanceFromBottom > 100);
        });
    }

    function updateClock() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('en-US', {
            hour12: false
        });
        if (currentTimeElement) currentTimeElement.textContent = timeString;
        return now;
    }

    function formatTime(date) {
        return date.toLocaleTimeString([], {
            hour: '2-digit',
            minute: '2-digit'
        });
    }

    function addMessage(type, content, sender, timestamp = new Date()) {
        if (typingIndicator) typingIndicator.style.display = 'none';
        if (!messagesContainer) return;

        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${type}`;

        // Ensure the sender title is added only once
        let innerHTML = `<div class="prediction-title">${sender}</div>`;
        innerHTML += content;
        innerHTML += `<div class="timestamp">${formatTime(timestamp)}</div>`;
        
        messageDiv.innerHTML = innerHTML;

        messagesContainer.appendChild(messageDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;

        // Update last update time for chat UI
        if (lastUpdateTimeElement) {
            lastUpdateTimeElement.textContent = formatTime(timestamp);
        }

        return messageDiv;
    }

    function showTyping() {
        if (typingIndicator) {
            typingIndicator.style.display = 'flex';
            if (messagesContainer) {
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }
    }

    function simulateInitialAnalysis() {
        showTyping();
        setTimeout(() => {
            addMessage('received',
                `<div class="prediction-card">
                    <div class="prediction-title"><i class="fas fa-check-circle"></i> ANALYSIS COMPLETE</div>
                    <p>AI pattern detection complete. Advanced algorithms initialized and ready for predictions.</p>
                </div>`,
                'LICUIS ULTRA');

            // Start the simple check logic (For UI status update)
            setInterval(checkPeriodAndPredictSimple, 5000);
            checkPeriodAndPredictSimple(); // Initial call
            
            // Start the chat-side prediction cycle
            setInterval(fetchCurrentGameIssue, 5000); 
            fetchCurrentGameIssue();
        }, 2000);
    }

    // FIX: Removed the logic that caused "object object" to be shown by ensuring
    // that `predictionData.final` is accessed for the prediction string.
    function createPredictionMessage(predictionData) {
        // FIX: predictionData is the full object { final: 'BIG', confidence: '85.00', ... }
        const prediction = predictionData.final; 
        const confidence = parseFloat(predictionData.confidence);
        const confidencePercentage = Math.round(confidence);
        const confidenceWidth = `${Math.min(100, confidencePercentage)}%`;
        
        let predictionType = '';
        let colorClass = '';

        if (prediction === 'BIG' || prediction === 'SMALL') {
            predictionType = prediction;
            colorClass = prediction === 'BIG' ? 'Green' : 'Red'; 
        } else if (prediction === 'RED' || prediction === 'GREEN') {
            predictionType = prediction;
            colorClass = prediction === 'RED' ? 'Red' : 'Green'; 
        } else {
             // Fallback for safety, though should be caught by ensemble weighting
            predictionType = prediction; 
            colorClass = 'Blue'; 
        }

        // FIX APPLIED HERE: Use 'N/A' as a safe string fallback for period
        const periodDisplay = predictionData.period || latestPeriod || 'N/A';
        
        return `
            <div class="prediction-card">
                <div class="period-display">${periodDisplay}</div>
                <div class="prediction-value">${predictionType} <span class="text-${colorClass.toLowerCase}"></div>

                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${confidenceWidth}; background-color: var(--color-${colorClass.toLowerCase()})"></div>
                </div>
                <div class="confidence-display">
                    <span>Confidence</span>
                    <span class="confidence-value">${confidencePercentage}%</span>
                </div>
            </div>
        `;
    }

    // --- AI Prediction and Training Logic ---
    async function fetchCurrentGameIssue() {
        const now = new Date();
        const apiUrl = 'https://api.bdg88zf.com/api/webapi/GetGameIssue';
        // Placeholder request data (assuming these are constant for the API call)
        const requestData = {
            typeId: 1,
            language: 0,
            random: "40079dcba93a48769c6ee9d4d4fae23f",
            signature: "D12108C4F57C549D82B23A91E0FA20AE",
            timestamp: Math.floor(now.getTime() / 1000)
        };

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json;charset=UTF-8'
                },
                body: JSON.stringify(requestData)
            });

            if (response.ok) {
                const data = await response.json();
                if (data.code === 0) {
                    updateServerStatus(true);
                    const newPeriod = data.data.issueNumber;
                    const lastResult = data.data.lastIssueNumber; 

                    // 1. Check for new result to train the AI
                    if (lastResult && lastResult.issueNumber && lastResult.issueNumber !== lastActualPeriod) {
                        const actualNumber = parseInt(lastResult.number);
                        
                        // Check if we have a prediction stored for the *just completed* period
                        // The lastActualPeriod should hold the period *before* the newPeriod
                        if (!isNaN(actualNumber) && currentPredictionData && currentPredictionData.period === lastActualPeriod) {
                            // Train the AI with the actual result and its previous prediction
                            predictionEngine.addResult(
                                actualNumber, 
                                currentPredictionData.all, 
                                currentPredictionData // Pass the full object
                            );
                            
                            addMessage('received', 
                                `<div class="prediction-title"><i class="fas fa-brain"></i> AI TRAINING COMPLETE</div>
                                 <p>Result for period <strong>${lastActualPeriod}</strong>: ${actualNumber} (${getBigSmallOutcome(actualNumber)}/${getRedGreenOutcome(actualNumber)}). AI has been updated.</p>`,
                                'LICUIS ULTRA'
                            );
                        }
                        
                        lastActualPeriod = lastResult.issueNumber;
                        lastActualNumber = actualNumber;
                    }

                    // 2. Make and display new prediction for the current period
                    if (newPeriod !== latestPeriod) {
                        latestPeriod = newPeriod;
                        updateChatPrediction(now, newPeriod); 
                    }
                } else {
                    updateServerStatus(false);
                }
            } else {
                updateServerStatus(false);
            }
        } catch (error) {
            console.error("Fetch error:", error);
            updateServerStatus(false);
        }
    }

    async function updateChatPrediction(currentTime, currentPeriod) {
        if (currentPeriod !== lastPredictionPeriod) {
            // Get prediction from the main AI Engine
            const predictionResults = predictionEngine.predictNext();

            // Store the full prediction data, including the period it was made for
            currentPredictionData = { 
                ...predictionResults, 
                period: currentPeriod,
                timestamp: currentTime.getTime()
            };
            
            lastPredictionPeriod = currentPeriod;
            
            // Show prediction message
            showTyping();
            setTimeout(() => {
                addMessage('received', createPredictionMessage(currentPredictionData), 'LICUIS ULTRA');
            }, 1000);
        }
    }

    function updateServerStatus(online) {
        const statusIndicator = document.querySelector('.status-indicator');
        if (serverOnline !== online) {
            serverOnline = online;
            if (online) {
                if (connectionStatus) connectionStatus.textContent = "Connected to Server";
                if (statusIndicator) statusIndicator.className = "status-indicator online";
                addMessage('received', '<div class="prediction-title"><i class="fas fa-plug"></i> CONNECTION RESTORED</div><p>Server connection reestablished. Resuming normal operations.</p>', 'System');
            } else {
                if (connectionStatus) connectionStatus.textContent = "Connecting...";
                if (statusIndicator) statusIndicator.className = "status-indicator offline";
                addMessage('received', '<div class="prediction-title"><i class="fas fa-exclamation-triangle"></i> CONNECTION LOST</div><p>Temporarily lost connection to prediction server. Attempting to reconnect...</p>', 'System');
            }
        }
    }
    
    // Simple Prediction Logic (Kept for the UI status update)
    async function checkPeriodAndPredictSimple() {
        try {
            const statusElement = document.getElementById('status');
            const periodElement = document.getElementById("period");
            
            if (statusElement) statusElement.innerHTML = '<span class="loading"></span> Updating...';
            
            const now = new Date();
            const requestData = {
                typeId: 1,
                language: 0,
                random: "40079dcba93a48769c6ee9d4d4fae23f",
                signature: "D12108C4F57C549D82B23A91E0FA20AE",
                timestamp: Math.floor(now.getTime() / 1000)
            };
            
            const response = await fetch("https://api.bdg88zf.com/api/webapi/GetGameIssue", {
                method: "POST",
                headers: { "Content-Type": "application/json;charset=UTF-8" },
                body: JSON.stringify(requestData),
            });

            const data = await response.json();
            if (data.code === 0) {
                const currentPeriod = data.data.issueNumber;
                if (periodElement) periodElement.textContent = currentPeriod;
                
                if (statusElement) statusElement.textContent = 'Active';
                updateServerStatus(true);
            } else {
                if (statusElement) statusElement.textContent = 'API Error';
                updateServerStatus(false);
            }
        } catch (err) {
            console.error("Fetch error:", err);
            const statusElement = document.getElementById('status');
            if (statusElement) statusElement.textContent = 'Connection Error';
            updateServerStatus(false);
        }
    }
    
    // Initialize the application
    createParticles();

    // Animate the game selection title after page load
    setTimeout(() => {
        const titleElement = document.getElementById('gameSelectionTitle');
        if (titleElement) {
            titleElement.classList.add('animate');
        }
    }, 500);
});
</script>
</body>
</html>
